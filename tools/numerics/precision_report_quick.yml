# Usage:
# All cases are compared to reference baseline.
# Use L2 boxes to spot raw logit drift;
# use JS boxes to evaluate distributional change.
# Use flip‑given‑margin curves to assess decision stability at different confidence levels.
# Prefer curves that hug the bottom, especially for larger margins.
# Compare eager vs comp within the same device/dtype to isolate compiler effects;
# compare dtype within the same device/mode to isolate precision effects;
# compare devices within a fixed dtype/mode to isolate backend effects.


run_id: "daisy-numerics-v1"
reference:
  device: cpu
  dtype: fp32
  compile: false
devices: [cpu, mps]
compile_modes: [false]
dtype_policies: [fp32, bf16, fp16, autocast_bf16]
decoding:
  mode_open_loop:
    enabled: true
  mode_closed_loop:
    enabled: true,
    max_new_tokens: 4 # 256 7 to 87
sampling:
  temperature: 0.0
  top_p: 1.0
controls:
  deterministic: true
dataset:
  shard_pattern: "data/fineweb/fineweb_train_000001.bin"  # or: path: "prompts.jsonl"
  max_prompts: 4
  length_buckets: [ 4 ] #64
metrics:
  topk: [1, 5, 10]
  margin_bins: [0.1, 0.5, 1.0]
outputs:
  root: "./artifacts_root/quick"
  write_parquet: true